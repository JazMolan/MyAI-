<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bikom Axel - Advanced Research AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Fira+Code:wght@400;500&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }

        .markdown-content h1 { font-size: 1.5rem; font-weight: 700; margin-top: 1.25rem; color: #1e293b; }
        .markdown-content h2 { font-size: 1.25rem; font-weight: 600; margin-top: 1rem; color: #334155; }
        .markdown-content p { margin-bottom: 0.75rem; line-height: 1.7; color: #475569; }
        .markdown-content ul { list-style-type: disc; padding-left: 1.5rem; margin-bottom: 1rem; }
        .markdown-content li { margin-bottom: 0.5rem; color: #475569; }
        .markdown-content code { background: #f1f5f9; color: #4f46e5; padding: 0.2rem 0.4rem; border-radius: 0.25rem; font-size: 0.9em; font-family: 'Fira Code', monospace; }
        .markdown-content strong { color: #1e293b; font-weight: 600; }

        .thinking-container {
            border-left: 3px solid #6366f1;
            background: #f8fafc;
            font-family: 'Fira Code', monospace;
            position: relative;
            overflow: hidden;
        }

        .thinking-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, rgba(99, 102, 241, 0.03) 0%, rgba(255, 255, 255, 0) 100%);
            pointer-events: none;
        }

        .pulse-dot {
            width: 8px;
            height: 8px;
            background-color: #6366f1;
            border-radius: 50%;
            display: inline-block;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 6px rgba(99, 102, 241, 0); }
            100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(99, 102, 241, 0); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }

        .shimmer {
            background: linear-gradient(90deg, #f1f5f9 25%, #e2e8f0 50%, #f1f5f9 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    </style>
</head>
<body class="flex flex-col h-screen text-slate-900">

    <!-- Header -->
    <header class="bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between shrink-0 z-10 shadow-sm">
        <div class="flex items-center gap-3">
            <div class="bg-slate-900 p-2.5 rounded-xl text-white shadow-lg shadow-slate-200">
                <i data-lucide="zap" class="w-5 h-5 fill-current"></i>
            </div>
            <div>
                <h1 class="text-lg font-black text-slate-800 tracking-tighter uppercase">Bikom <span class="text-indigo-600 italic">Axel</span></h1>
                <p class="text-[10px] text-slate-400 font-bold uppercase tracking-widest leading-none mt-1">Advanced Reasoning Core</p>
            </div>
        </div>
        
        <div class="flex items-center gap-4">
            <div class="hidden sm:flex items-center gap-3 text-[11px] font-bold text-slate-500 bg-slate-50 border border-slate-100 px-4 py-2 rounded-full">
                <div class="pulse-dot"></div>
                SYSTEM ONLINE: GEMINI 2.5 FLASH
            </div>
        </div>
    </header>

    <main class="flex-1 flex overflow-hidden">
        <!-- Sidebar -->
        <aside class="w-72 border-r border-slate-200 bg-white hidden lg:flex flex-col p-6 shrink-0">
            <div class="space-y-6">
                <div>
                    <h3 class="text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-4">Neural Modules</h3>
                    <div class="space-y-1.5">
                        <button onclick="setMode('research')" id="btn-research" class="nav-btn w-full flex items-center gap-3 px-4 py-3 rounded-xl bg-indigo-50 text-indigo-700 font-bold transition-all border border-indigo-100/50">
                            <i data-lucide="brain-circuit" class="w-4 h-4"></i> Synthesis Engine
                        </button>
                        <button onclick="setMode('summarize')" id="btn-summarize" class="nav-btn w-full flex items-center gap-3 px-4 py-3 rounded-xl text-slate-500 hover:bg-slate-50 hover:text-slate-900 transition-all border border-transparent">
                            <i data-lucide="file-search" class="w-4 h-4"></i> Abstract Probe
                        </button>
                        <button onclick="setMode('critique')" id="btn-critique" class="nav-btn w-full flex items-center gap-3 px-4 py-3 rounded-xl text-slate-500 hover:bg-slate-50 hover:text-slate-900 transition-all border border-transparent">
                            <i data-lucide="shield-alert" class="w-4 h-4"></i> Logic Validator
                        </button>
                    </div>
                </div>

                <div class="pt-6 border-t border-slate-100">
                    <h3 class="text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-4">Core Stats</h3>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between px-1">
                            <span class="text-xs font-semibold text-slate-500">Reasoning Depth</span>
                            <span class="text-xs font-bold text-indigo-600">3.5k tokens</span>
                        </div>
                        <div class="w-full bg-slate-100 h-1.5 rounded-full overflow-hidden">
                            <div class="bg-indigo-600 h-full w-[85%] rounded-full"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="mt-auto p-5 bg-slate-900 rounded-2xl text-white shadow-2xl">
                <p class="text-[10px] font-bold text-indigo-400 uppercase tracking-widest mb-2">Notice</p>
                <p class="text-xs leading-relaxed opacity-80 font-medium">Bikom Axel is optimized for high-complexity academic tasks. It shows its full thinking path for verification.</p>
            </div>
        </aside>

        <!-- Content Area -->
        <section class="flex-1 flex flex-col min-w-0 bg-[#fbfcfd]">
            <!-- Status Header -->
            <div class="px-8 py-5 bg-white border-b border-slate-200 flex items-center justify-between shrink-0">
                <div class="flex items-center gap-4">
                    <div id="mode-icon-container" class="w-10 h-10 rounded-xl bg-slate-900 flex items-center justify-center text-white">
                        <i data-lucide="brain-circuit" class="w-5 h-5"></i>
                    </div>
                    <div>
                        <h2 id="current-mode-title" class="text-lg font-bold text-slate-900 tracking-tight">Synthesis Engine</h2>
                        <p id="current-mode-desc" class="text-xs text-slate-500 font-medium italic">Tracing cross-domain academic connections...</p>
                    </div>
                </div>
                <button onclick="clearChat()" class="p-2.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all" title="Reset Session">
                    <i data-lucide="trash-2" class="w-5 h-5"></i>
                </button>
            </div>

            <!-- Messages Output -->
            <div id="chat-container" class="flex-1 overflow-y-auto px-4 py-8 space-y-8">
                <!-- Welcome -->
                <div class="max-w-4xl mx-auto animate-fade-in">
                    <div class="bg-white border border-slate-200 p-8 rounded-[2rem] shadow-sm relative overflow-hidden">
                        <h3 class="text-2xl font-black text-slate-900 mb-3 tracking-tight">BIKOM AXEL <span class="text-indigo-600">INTELLIGENCE</span></h3>
                        <p class="text-slate-600 mb-8 leading-relaxed max-w-2xl font-medium">
                            Welcome to the high-depth reasoning terminal. Every query processed here undergoes a rigorous logical audit before synthesis.
                        </p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <button onclick="quickQuery('Explain the quantum mechanical principles of photosynthesis in extreme detail.')" class="text-left p-5 rounded-2xl bg-slate-50 hover:bg-indigo-50 border border-slate-100 hover:border-indigo-200 transition-all group">
                                <span class="text-[10px] font-bold text-indigo-500 uppercase block mb-2">Science</span>
                                <p class="text-sm font-bold text-slate-800">Quantum Photosynthesis Breakdown</p>
                            </button>
                            <button onclick="quickQuery('Provide a deep analysis of the impact of the printing press on the Reformation.')" class="text-left p-5 rounded-2xl bg-slate-50 hover:bg-indigo-50 border border-slate-100 hover:border-indigo-200 transition-all group">
                                <span class="text-[10px] font-bold text-indigo-500 uppercase block mb-2">History</span>
                                <p class="text-sm font-bold text-slate-800">Printing Press & Social Change</p>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Input Box -->
            <div class="p-8 bg-white border-t border-slate-200">
                <div class="max-w-4xl mx-auto">
                    <div class="relative flex items-end bg-slate-50 rounded-[1.5rem] border border-slate-200 p-2 focus-within:ring-2 focus-within:ring-indigo-500/20 focus-within:border-indigo-500/50 transition-all">
                        <textarea id="user-input" rows="1" 
                            class="flex-1 bg-transparent border-0 focus:ring-0 px-4 py-3 resize-none text-slate-700 font-medium placeholder:text-slate-400 min-h-[52px] max-h-48"
                            placeholder="Enter research parameters..."></textarea>
                        <button id="send-btn" 
                            class="bg-slate-900 hover:bg-indigo-600 text-white p-3.5 rounded-2xl shadow-xl transition-all disabled:opacity-30 mb-1 mr-1">
                            <i data-lucide="send" class="w-5 h-5"></i>
                        </button>
                    </div>
                    <p class="text-[10px] text-center text-slate-400 mt-4 font-bold uppercase tracking-widest">Neural Link Active â€” Powered by Bikom Axel v1.0</p>
                </div>
            </div>
        </section>
    </main>

    <script>
        const apiKey = "AIzaSyBBZvwXBSNMubKV6itHRTBUiAgv0X0Jbn0"; 
        let currentMode = 'research';
        const chatContainer = document.getElementById('chat-container');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');

        const modes = {
            research: {
                title: "Synthesis Engine",
                icon: "brain-circuit",
                desc: "Tracing cross-domain academic connections...",
                prompt: "You are Bikom Axel, an advanced AI researcher. Provide extremely detailed, step-by-step, and exhaustive academic answers. Use professional terminology. Include a bibliography at the end."
            },
            summarize: {
                title: "Abstract Probe",
                icon: "file-search",
                desc: "Extracting core conceptual metadata...",
                prompt: "Deconstruct the provided text. Identify the central thesis, methodology, limitations, and empirical findings with absolute precision."
            },
            critique: {
                title: "Logic Validator",
                icon: "shield-alert",
                desc: "Auditing structural integrity of arguments...",
                prompt: "Audit the provided argument. Identify logical fallacies, data gaps, and cognitive biases. Provide a rigor score from 1-10."
            }
        };

        function init() {
            lucide.createIcons();
            userInput.addEventListener('input', () => {
                userInput.style.height = 'auto';
                userInput.style.height = (userInput.scrollHeight) + 'px';
            });
            sendBtn.addEventListener('click', handleSend);
            userInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    handleSend();
                }
            });
        }

        function setMode(modeKey) {
            currentMode = modeKey;
            const mode = modes[modeKey];
            
            document.getElementById('current-mode-title').innerText = mode.title;
            document.getElementById('current-mode-desc').innerText = mode.desc;
            document.getElementById('mode-icon-container').innerHTML = `<i data-lucide="${mode.icon}" class="w-5 h-5"></i>`;
            
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('bg-indigo-50', 'text-indigo-700', 'font-bold', 'border-indigo-100/50');
                btn.classList.add('text-slate-500', 'border-transparent');
            });
            
            const activeBtn = document.getElementById(`btn-${modeKey}`);
            activeBtn.classList.add('bg-indigo-50', 'text-indigo-700', 'font-bold', 'border-indigo-100/50');
            activeBtn.classList.remove('text-slate-500', 'border-transparent');
            
            lucide.createIcons();
        }

        function clearChat() {
            chatContainer.innerHTML = '';
            appendMessage('ai', 'System memory purged. Bikom Axel ready for new instructions.');
        }

        function quickQuery(text) {
            userInput.value = text;
            userInput.style.height = 'auto';
            handleSend();
        }

        function formatMarkdown(text) {
            return text
                .replace(/^### (.*$)/gim, '<h3 class="text-md font-black text-slate-900 mt-6 mb-2 tracking-tight">$1</h3>')
                .replace(/^## (.*$)/gim, '<h2 class="text-lg font-bold text-slate-800 mt-6 mb-3">$1</h2>')
                .replace(/^# (.*$)/gim, '<h1 class="text-xl font-black text-slate-900 mt-8 mb-4">$1</h1>')
                .replace(/^\* (.*$)/gim, '<li class="ml-4">$1</li>')
                .replace(/^\- (.*$)/gim, '<li class="ml-4">$1</li>')
                .replace(/\*\*(.*?)\*\*/g, '<strong class="font-bold text-slate-900">$1</strong>')
                .replace(/`(.*?)`/g, '<code>$1</code>')
                .replace(/\n\n/g, '</p><p class="mt-4">')
                .replace(/\n/g, '<br>');
        }

        function appendMessage(role, text, thinking = null) {
            const wrapper = document.createElement('div');
            wrapper.className = `max-w-4xl mx-auto animate-fade-in ${role === 'user' ? 'flex flex-col items-end' : ''}`;
            
            if (role === 'user') {
                wrapper.innerHTML = `
                    <div class="bg-slate-900 text-white px-6 py-4 rounded-2xl rounded-tr-none shadow-xl max-w-[85%] border border-slate-800">
                        <p class="text-sm font-medium leading-relaxed">${text}</p>
                    </div>
                `;
            } else {
                wrapper.innerHTML = `
                    <div class="bg-white border border-slate-200 p-8 rounded-[2rem] shadow-sm space-y-6">
                        ${thinking ? `
                            <div class="thinking-container p-6 rounded-2xl border-l-4 border-indigo-600 mb-6">
                                <div class="flex items-center gap-3 mb-4">
                                    <div class="pulse-dot"></div>
                                    <span class="text-[10px] font-black text-slate-900 uppercase tracking-[0.2em]">Axel Logic Stream</span>
                                </div>
                                <div class="text-[11px] leading-relaxed text-slate-500 font-medium whitespace-pre-wrap opacity-80">${thinking}</div>
                            </div>
                        ` : ''}
                        <div class="markdown-content text-sm leading-relaxed">
                            <p>${formatMarkdown(text)}</p>
                        </div>
                    </div>
                `;
            }
            
            chatContainer.appendChild(wrapper);
            chatContainer.scrollTop = chatContainer.scrollHeight;
            lucide.createIcons();
        }

        async function handleSend() {
            const text = userInput.value.trim();
            if (!text || sendBtn.disabled) return;

            userInput.value = '';
            userInput.style.height = 'auto';
            appendMessage('user', text);
            
            const loadingId = 'loader-' + Date.now();
            const loader = document.createElement('div');
            loader.id = loadingId;
            loader.className = 'max-w-4xl mx-auto space-y-4 py-4';
            loader.innerHTML = `
                <div class="shimmer h-32 w-full rounded-2xl"></div>
                <div class="shimmer h-64 w-full rounded-2xl"></div>
            `;
            chatContainer.appendChild(loader);
            chatContainer.scrollTop = chatContainer.scrollHeight;

            sendBtn.disabled = true;

            try {
                const result = await callGemini(text);
                document.getElementById(loadingId).remove();
                appendMessage('ai', result.text, result.thinking);
            } catch (err) {
                document.getElementById(loadingId).innerHTML = `
                    <div class="bg-red-50 text-red-700 p-6 rounded-2xl text-sm border border-red-100 flex items-center gap-3 font-bold">
                        <i data-lucide="shield-alert" class="w-5 h-5"></i>
                        <p>NEURAL LINK INTERRUPTED. RETRY INSTRUCTION.</p>
                    </div>
                `;
                lucide.createIcons();
            } finally {
                sendBtn.disabled = false;
            }
        }

        async function callGemini(query, retries = 0) {
            const sys = `Identity: Bikom Axel. Instructions: ${modes[currentMode].prompt}. You must output your full internal thinking process clearly.`;
            
            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: query }] }],
                        systemInstruction: { parts: [{ text: sys }] },
                        tools: [{ "google_search": {} }],
                        generationConfig: {
                            thinkingBudget: 3500 
                        }
                    })
                });

                if (!response.ok) throw new Error('API');

                const data = await response.json();
                const parts = data.candidates?.[0]?.content?.parts || [];
                
                let text = "";
                let thinking = "";

                parts.forEach(part => {
                    if (part.thought) thinking += part.thought;
                    if (part.text) text += part.text;
                });

                if (!text && thinking) { text = thinking; thinking = ""; }
                
                return { text, thinking };
            } catch (err) {
                if (retries < 3) {
                    await new Promise(r => setTimeout(r, Math.pow(2, retries) * 1000));
                    return callGemini(query, retries + 1);
                }
                throw err;
            }
        }

        window.onload = init;
    </script>
</body>

</html>
